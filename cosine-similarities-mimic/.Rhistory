pwa_diff_ci[['describe_patient']] <- doPWAdiff(boot_data0_long %>% filter(target_word %in% adjectives_for_patients),
boot_data_long %>% filter(target_word %in% adjectives_for_patients))
pwa_ci[['describe_patient']] %>% pwa_plot()
ggsave(paste0(pwa_folder, 'plot-describe_patient.png'), width=10, height=7)
# Save Results --------------
pwa_ci_list <- lapply(1:length(pwa_ci), function(k) pwa_ci[[k]] %>% mutate(theme=names(pwa_ci)[k]))
pwa_ci_df   <- do.call(rbind, pwa_ci_list) %>%
select(theme, base_word, pwa, bootstrap_se, bootstrap_me, lb, ub, significant)
write.csv(pwa_ci_df, paste0(pwa_folder, 'CI-pwa95.csv'))
pwa_diff_ci_list <- lapply(1:length(pwa_diff_ci), function(k) pwa_diff_ci[[k]] %>% mutate(theme=names(pwa_diff_ci)[k]))
pwa_diff_ci_df   <- do.call(rbind, pwa_diff_ci_list) %>%
mutate(comparison=case_when(
comparison == 'ac' ~ 'A-C',
comparison == 'ah' ~ 'A-H',
comparison == 'ch' ~ 'C-H',
TRUE ~ as.character(NA)
)) %>%
select(theme, comparison, pwa_difference, bootstrap_se, bootstrap_me, lb, ub, significant)
write.csv(pwa_diff_ci_df, paste0(pwadiff_folder, 'CI-pwaDiff95FW.csv'))
readr::read_csv('../Tables/exclusionPattern-20231012.csv')
readr::read_csv('../Tables/exclusionPattern-20231012.csv')[,-1]
readr::read_csv('../Tables/exclusionCohort-20231012.csv')[,-1]
#| echo: false
#| warning: false
#| message: false
ex2 <- readr::read_csv('../Tables/exclusionCohort-20231012.csv')[,-1]
names(ex2)[c(2,3,4,8)] <- n
#| echo: false
#| warning: false
#| message: false
ex2 <- readr::read_csv('../Tables/exclusionCohort-20231012.csv')[,-1]
names(ex2)[c(2,3,4,8)] <- 'n'
ex2
#| echo: false
#| warning: false
#| message: false
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
names(ex3)[c(2,4,6,8)] <- 'n'
ex3
ex1 <- readr::read_csv('../Tables/exclusionPattern-20231012.csv')[,-1]
ex1
```
ex1 <- readr::read_csv('../Tables/exclusionPattern-20231012.csv')[,-1]
ex1
```
#| echo: false
#| warning: false
#| message: false
ex1 <- readr::read_csv('../Tables/exclusionPattern-20231012.csv')[,-1]
ex1
sum(ex1$n)
`sum(ex1$n)
sum(ex1$n)
Comma(sum(ex1$n))
comma(sum(ex1$n))
formatC(sum(ex1$n))
formatC(sum(ex1$n))
formatC(sum(ex1$n), format='d', bigmark=',')
formatC(sum(ex1$n), format='d', bigmark=',')
formatC(sum(ex1$n), format='d', big.mark=',')
#| echo: false
#| warning: false
#| message: false
ex2 <- readr::read_csv('../Tables/exclusionCohort-20231012.csv')[,-1]
names(ex2)[c(2,4,6,8)] <- 'n'
ex2
#| echo: false
#| warning: false
#| message: false
ex2 <- readr::read_csv('../Tables/exclusionCohort-20231012.csv')[,-1]
names(ex2)[c(2,4,6,8)] <- 'n'
ex2
#| echo: false
#| warning: false
#| message: false
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
names(ex3)[c(2,4,6,8)] <- 'n'
ex3
formatC(sum(ex3[,2]), format='d', big.mark=',')
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
names(ex3)[c(2,4,6,8)] <- 'n'
ex3
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
names(ex3)[c(2,4,6,8)] <- 'n'
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
ex3 <- readr::read_csv('../Tables/exclusionWidow-20231012.csv')[,-1]
names(ex3)[c(2,4,6,8)] <- 'n'
ex3
59/2689
formatC(sum(ex3[,2]), format='d', big.mark=',')
dementia_2w <- read_dta('../Data/dementia_2w.dta')
dementia_2w <- read_dta('../Data/dementia_2w.dta')
cancer_2w   <- read_dta('../Data/cancer_2w.dta')
cancer_2w   <- read_dta('../Data/cancer_2w.dta')
organ_2w    <- read_dta('../Data/organ_2w.dta')
organ_2w    <- read_dta('../Data/organ_2w.dta')
any_2w      <- read_dta('../Data/any_2w.dta')
dementia_2w
dementia_2w %>%
filter(WAVE==MATCH_WAVE)
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count()
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(MATCH_ID) %>%
count() %>%
arrange(-n)
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(ID_NUM) %>%
count() %>%
arrange(-n)
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count()
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count()
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(Cancer=SrsIllness)
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness)
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness)
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness)
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness)
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness)
bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
matched_counts <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
names(matched_counts)[c(2,4,6,8)] <- 'n'
matched_counts
formatC(sum(ex3[,2]), format='d', big.mark=',')
ex4 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
ex4
formatC(sum(ex4[,2]), format='d', big.mark=',')
#| echo: false
#| warning: false
#| message: false
library(haven)
dementia_2w <- read_dta('../Data/dementia_2w.dta')
cancer_2w   <- read_dta('../Data/cancer_2w.dta')
organ_2w    <- read_dta('../Data/organ_2w.dta')
any_2w      <- read_dta('../Data/any_2w.dta')
ex4 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
names(ex4)[c(2,4,6,8)] <- 'n'
ex4
formatC(sum(ex4[,8]), format='d', big.mark=',')
formatC(sum(ex4[,6]), format='d', big.mark=',')
formatC(sum(ex4[,4]), format='d', big.mark=',')
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness)
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
names(ex5)[c(2,4,6,8)] <- 'n'
ex5
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ANY=SrsIllness)
)
names(ex5)[c(3,6,9,12)] <- 'n'
ex5
names(ex5)[c(2,5,8,11)] <- 'GROUP'
names(ex5)[c(3,6,9,12)] <- 'n'
ex5
dementia_2w %>%
filter(WAVE == MATCH_WAVE)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count()
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count(-n)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n) %>%
left_join(dementia_2w)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
filter(GROUP == 'Case') %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n) %>%
left_join(dementia_2w)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
filter(GROUP == 'Case') %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n) %>%
ungroup() %>%
left_join(dementia_2w)
dementia_2w %>%
filter(WAVE == MATCH_WAVE) %>%
filter(GROUP == 'Case') %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n) %>%
ungroup() %>%
left_join(dementia_2w) %>%
filter(WAVE == MATCH_WAVE)
dementia_2w %>%
filter(GROUP == 'Case' & COHORT_DEMENTIA==1)
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1)
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1) %>%
filter(WAVE == MATCH_WAVE)
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1) %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count()
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1) %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n)
2673+70
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1) %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(HHIDPN) %>%
count() %>%
arrange(-n) %>%
filter(n>1)
dementia_2w %>%
filter(GROUP == 'Case' & SrsIllness==1) %>%
filter(WAVE == MATCH_WAVE) %>%
group_by(ID_NUM) %>%
count() %>%
arrange(-n) %>%
filter(n>1)
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(CO_ANY=SrsIllness)
)
names(ex5)[c(2,5,8,11)] <- 'GROUP'
names(ex5)[c(3,6,9,12)] <- 'n'
ex5
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(CO_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(CO_ANY=SrsIllness)
)
#| echo: false
#| warning: false
#| message: false
ex5 <- bind_cols(
dementia_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_DEMENTIA=SrsIllness),
cancer_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(COHORT_CANCER=SrsIllness),
organ_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(CO_ORGAN=SrsIllness),
any_2w %>%
filter(WAVE==MATCH_WAVE) %>%
group_by(SrsIllness, GROUP) %>%
count() %>%
rename(CO_ANY=SrsIllness)
)
names(ex5)[c(2,5,8,11)] <- 'GROUP'
names(ex5)[c(3,6,9,12)] <- 'n'
names(ex5)[c(2,5,8,11)] <- 'GROUP'
names(ex5)[c(3,6,9,12)] <- 'n'
ex5
